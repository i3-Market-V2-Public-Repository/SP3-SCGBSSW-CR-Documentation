<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3089px" preserveAspectRatio="none" style="width:1121px;height:3089px;" version="1.1" viewBox="0 0 1121 3089" width="1121px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Noto Sans" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="296" x="413.25" y="29.2419">Non-repudiable data-exchange log</text><rect fill="#FFFFFF" height="3035.5069" style="stroke: #A80036; stroke-width: 1.0;" width="88" x="59" y="42.5158"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="69.5" y="56.4129">Consumer</text><rect fill="#FFFFFF" height="3035.5069" style="stroke: #A80036; stroke-width: 1.0;" width="187" x="359.5" y="42.5158"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="425.5" y="56.4129">Provider</text><rect fill="#90EE90" height="3035.5069" style="stroke: #A80036; stroke-width: 1.0;" width="333" x="730.5" y="42.5158"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="135" x="829.5" y="56.4129">i3-Market Backplane</text><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="898.5" y="74.1189"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98" y="845.1262"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98" y="1222.9923"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98" y="2436.3148"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98" y="2688.2388"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98" y="2798.3568"/><rect fill="#FFFFFF" height="636.6504" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="448" y="168.7697"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="208.4757"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="300.8878"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="558.654"/><rect fill="#FFFFFF" height="843.8684" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="448" y="1292.6983"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="1332.4043"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="1657.1524"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="2069.8607"/><rect fill="#FFFFFF" height="61.265" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="813" y="1918.6246"/><rect fill="#FFFFFF" height="122.5301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="813" y="2224.6666"/><rect fill="#FFFFFF" height="2109.7607" style="stroke: #000000; stroke-width: 2.0;" width="1096.5" x="13" y="895.1262"/><rect fill="#FFFFFF" height="2058.3487" style="stroke: none; stroke-width: 1.0;" width="1096.5" x="13" y="946.5382"/><rect fill="#FFFFFF" height="1615.4826" style="stroke: #000000; stroke-width: 2.0;" width="1076.5" x="23" y="1382.4043"/><rect fill="#FFFFFF" height="1564.0706" style="stroke: none; stroke-width: 1.0;" width="1076.5" x="23" y="1433.8163"/><rect fill="#FFFFFF" height="210.63" style="stroke: #000000; stroke-width: 2.0;" width="878.5" x="43" y="2151.5667"/><rect fill="#FFFFFF" height="176.924" style="stroke: #000000; stroke-width: 2.0;" width="858.5" x="53" y="2178.2727"/><rect fill="#FFFFFF" height="504.5721" style="stroke: #000000; stroke-width: 2.0;" width="1056.5" x="33" y="2486.3148"/><rect fill="#FFFFFF" height="70.118" style="stroke: #000000; stroke-width: 2.0;" width="1016.5" x="53" y="2544.7268"/><rect fill="#FFFFFF" height="369.0421" style="stroke: none; stroke-width: 1.0;" width="1056.5" x="33" y="2621.8448"/><rect fill="#FFFFFF" height="135.5301" style="stroke: #000000; stroke-width: 2.0;" width="1036.5" x="43" y="2848.3568"/><rect fill="#FFFFFF" height="70.118" style="stroke: #000000; stroke-width: 2.0;" width="1016.5" x="53" y="2906.7689"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="103" x2="103" y1="135.0637" y2="3021.8869"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="452.5" x2="452.5" y1="135.0637" y2="3021.8869"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="817.5" x2="817.5" y1="135.0637" y2="3021.8869"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="985.5" x2="985.5" y1="135.0637" y2="3021.8869"/><rect fill="#FEFECE" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="63" y="100.9958"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="70" y="122.9617">: SDA SDK</text><rect fill="#FEFECE" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="63" y="3020.8869"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="70" y="3042.8528">: SDA SDK</text><rect fill="#FEFECE" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="363.5" y="81.9279"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="426.5" y="103.8938">SDA API</text><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="370.5" y="122.9617">: Data Transfer Manager</text><rect fill="#FEFECE" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="363.5" y="3020.8869"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="426.5" y="3042.8528">SDA API</text><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="370.5" y="3061.9208">: Data Transfer Manager</text><rect fill="#FEFECE" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="734.5" y="81.9279"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="770.5" y="103.8938">Backplane API</text><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="741.5" y="122.9617">: Auditable Accounting</text><rect fill="#FEFECE" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="734.5" y="3020.8869"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="770.5" y="3042.8528">Backplane API</text><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="741.5" y="3061.9208">: Auditable Accounting</text><rect fill="#FEFECE" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="911.5" y="81.9279"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="938" y="103.8938">Backplane API</text><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="134" x="918.5" y="122.9617">: Conflict Resolution</text><rect fill="#FEFECE" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="911.5" y="3020.8869"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="938" y="3042.8528">Backplane API</text><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="134" x="918.5" y="3061.9208">: Conflict Resolution</text><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98" y="845.1262"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98" y="1222.9923"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98" y="2436.3148"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98" y="2688.2388"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98" y="2798.3568"/><rect fill="#FFFFFF" height="636.6504" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="448" y="168.7697"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="208.4757"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="300.8878"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="558.654"/><rect fill="#FFFFFF" height="843.8684" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="448" y="1292.6983"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="1332.4043"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="1657.1524"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="2069.8607"/><rect fill="#FFFFFF" height="61.265" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="813" y="1918.6246"/><rect fill="#FFFFFF" height="122.5301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="813" y="2224.6666"/><polygon fill="#A80036" points="436,164.7697,446,168.7697,436,172.7697,440,168.7697" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="442" y1="168.7697" y2="168.7697"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="110" y="162.9607">GET data {id: #X}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="463" x2="505" y1="200.4757" y2="200.4757"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="505" x2="505" y1="200.4757" y2="213.4757"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464" x2="505" y1="213.4757" y2="213.4757"/><polygon fill="#A80036" points="474,209.4757,464,213.4757,474,217.4757,470,213.4757" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="470" y="194.6667">create one time secret S</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="463" x2="505" y1="292.8878" y2="292.8878"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="505" x2="505" y1="292.8878" y2="305.8878"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464" x2="505" y1="305.8878" y2="305.8878"/><polygon fill="#A80036" points="474,301.8878,464,305.8878,474,309.8878,470,305.8878" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="470" y="269.3728">encrypt data with S</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="470" y="287.0788">C=Enc(S, data)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="463" x2="505" y1="550.654" y2="550.654"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="505" x2="505" y1="550.654" y2="563.654"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464" x2="505" y1="563.654" y2="563.654"/><polygon fill="#A80036" points="474,559.654,464,563.654,474,567.654,470,563.654" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="470" y="361.7848">create proof of origin</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="470" y="379.4908">PoO=signature</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="574" y="383.3698">P</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="580" y="379.4908">({</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="486" y="400.1968">id: #X,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="486" y="417.9028">src: ProvId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="486" y="435.6089">dst: ConsId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="486" y="453.3149">timestamp: TS</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="590" y="457.1939">O</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="596" y="453.3149">,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="486" y="474.0209">dataDescription,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="486" y="491.7269">dataCommitment: hash(data),</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="486" y="509.4329">SCommitment: hash(S),</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="486" y="527.1389">encryptedData: C</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="470" y="544.845">})</text><path d="M207,355.3878 L207,559.3878 L443,559.3878 L443,365.3878 L433,355.3878 L207,355.3878 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M433,355.3878 L433,365.3878 L443,365.3878 L433,355.3878 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="213" y="374.2848">dataDescription</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="336" y="374.2848">describes the</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="213" y="391.9908">piece of plaintext data</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="213" y="409.6968">(format, size, ...)</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="216" y="427.4028"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="213" y="445.1089">dataCommitment</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="328" y="445.1089">is a commitment</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="213" y="462.8149">that can be later used to</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="213" y="480.5209">verify the decrypted data</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="216" y="498.2269"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="213" y="515.9329">SCommitment</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="304" y="515.9329">is a commitment</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="213" y="533.6389">that can be later used to</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="213" y="551.345">verify the received</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="325" y="551.345">S</text><polygon fill="#A80036" points="114,801.4201,104,805.4201,114,809.4201,110,805.4201" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="108" x2="452" y1="805.4201" y2="805.4201"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="120" y="619.551">{</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="136" y="637.257">id: #X,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="136" y="654.963">src: ProvId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="136" y="672.669">dst: ConsId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="136" y="690.375">timestamp: TS</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="240" y="694.254">O</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="246" y="690.375">,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="136" y="711.0811">dataDescription,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="136" y="728.7871">dataCommitment: hash(data),</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="136" y="746.4931">Scommitment: hash(S),</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="136" y="764.1991">encryptedData: C,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="136" y="781.9051">proof: PoO</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="120" y="799.6111">}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="108" x2="150" y1="837.1262" y2="837.1262"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="150" x2="150" y1="837.1262" y2="850.1262"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109" x2="150" y1="850.1262" y2="850.1262"/><polygon fill="#A80036" points="119,846.1262,109,850.1262,119,854.1262,115,850.1262" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="115" y="831.3172">validate PoO</text><path d="M13,895.1262 L76,895.1262 L76,904.1262 L66,914.1262 L13,914.1262 L13,895.1262 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2109.7607" style="stroke: #000000; stroke-width: 2.0;" width="1096.5" x="13" y="895.1262"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="28" y="910.0232">alt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="91" y="908.8851">[invalid PoO]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="451" x2="441" y1="938.5382" y2="934.5382"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="451" x2="441" y1="938.5382" y2="942.5382"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="452" y1="938.5382" y2="938.5382"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="110" y="932.7292">terminate</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="444" x2="462" y1="929.5382" y2="947.5382"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="444" x2="462" y1="947.5382" y2="929.5382"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1109.5" y1="947.5382" y2="947.5382"/><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="18" y="959.2971">[valid PoO]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="145" y1="987.2261" y2="987.2261"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="987.2261" y2="1000.2261"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="104" x2="145" y1="1000.2261" y2="1000.2261"/><polygon fill="#A80036" points="114,996.2261,104,1000.2261,114,1004.2261,110,1000.2261" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="110" y="981.4171">store PoO</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="108" x2="150" y1="1214.9923" y2="1214.9923"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="150" x2="150" y1="1214.9923" y2="1227.9923"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109" x2="150" y1="1227.9923" y2="1227.9923"/><polygon fill="#A80036" points="119,1223.9923,109,1227.9923,119,1231.9923,115,1227.9923" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="115" y="1026.1231">create proof of reception</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="115" y="1043.8291">PoR=signature</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="219" y="1047.7081">C</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="225" y="1043.8291">({</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="131" y="1064.5351">id: #X,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="131" y="1082.2412">src: ProvId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="131" y="1099.9472">dst: ConsId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="131" y="1117.6532">timestamp: TS</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="235" y="1121.5322">R</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="241" y="1117.6532">,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="131" y="1138.3592">dataDescription,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="131" y="1156.0652">dataCommitment: hash(data),</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="131" y="1173.7712">SCommitment: hash(S),</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="131" y="1191.4773">encryptedData: C</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="115" y="1209.1833">})</text><polygon fill="#A80036" points="436,1288.6983,446,1292.6983,436,1296.6983,440,1292.6983" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="442" y1="1292.6983" y2="1292.6983"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="110" y="1283.8893">{id: #X, timestamp: TS</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="286" y="1287.7683">R</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="292" y="1283.8893">, proof: PoR}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="463" x2="505" y1="1324.4043" y2="1324.4043"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="505" x2="505" y1="1324.4043" y2="1337.4043"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464" x2="505" y1="1337.4043" y2="1337.4043"/><polygon fill="#A80036" points="474,1333.4043,464,1337.4043,474,1341.4043,470,1337.4043" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="470" y="1318.5953">validate PoR</text><path d="M23,1382.4043 L86,1382.4043 L86,1391.4043 L76,1401.4043 L23,1401.4043 L23,1382.4043 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1615.4826" style="stroke: #000000; stroke-width: 2.0;" width="1076.5" x="23" y="1382.4043"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="38" y="1397.3013">alt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="101" y="1396.1632">[invalid PoR]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="113" y1="1425.8163" y2="1421.8163"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="113" y1="1425.8163" y2="1429.8163"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="447" y1="1425.8163" y2="1425.8163"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="120" y="1420.0073">terminate</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="94" x2="112" y1="1416.8163" y2="1434.8163"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="94" x2="112" y1="1434.8163" y2="1416.8163"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="1099.5" y1="1434.8163" y2="1434.8163"/><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="28" y="1446.5753">[valid PoR]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="458" x2="500" y1="1474.5042" y2="1474.5042"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="500" x2="500" y1="1474.5042" y2="1487.5042"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="459" x2="500" y1="1487.5042" y2="1487.5042"/><polygon fill="#A80036" points="469,1483.5042,459,1487.5042,469,1491.5042,465,1487.5042" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="465" y="1468.6952">store PoR</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="463" x2="505" y1="1649.1524" y2="1649.1524"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="505" x2="505" y1="1649.1524" y2="1662.1524"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464" x2="505" y1="1662.1524" y2="1662.1524"/><polygon fill="#A80036" points="474,1658.1524,464,1662.1524,474,1666.1524,470,1662.1524" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="470" y="1513.4013">create proof of S</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="470" y="1531.1073">PoS=signature</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="574" y="1534.9863">P</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="580" y="1531.1073">({</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="486" y="1551.8133">id: #X,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="486" y="1569.5193">src: ProvId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="486" y="1587.2253">dst: ConsId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="486" y="1604.9313">timestamp: TS</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="590" y="1608.8104">P</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="596" y="1604.9313">,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="486" y="1625.6374">secret: S</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="470" y="1643.3434">})</text><polygon fill="#A80036" points="801,1914.6246,811,1918.6246,801,1922.6246,805,1918.6246" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="458" x2="807" y1="1918.6246" y2="1918.6246"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="465" y="1718.0494">account ([</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="465" y="1735.7554">{</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="481" y="1753.4614">availability: 'privateStorage',</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="481" y="1771.1674">permissions: {view: [ProvId, ConsId]},</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="312" x="481" y="1788.8735">content: {id: #X, dataDescription, PoO,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="465" y="1806.5795">PoR, PoS}</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="465" y="1824.2855">},</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="465" y="1841.9915">{</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="481" y="1859.6975">availability: 'blockchain',</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="481" y="1877.4035">content: {id: #X, S}</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="465" y="1895.1096">}</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="465" y="1912.8156">])</text><polygon fill="#A80036" points="469,1975.8896,459,1979.8896,469,1983.8896,465,1979.8896" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="463" x2="817" y1="1979.8896" y2="1979.8896"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="475" y="1974.0806">verificationCode</text><path d="M150,1931.6246 L150,2011.6246 L443,2011.6246 L443,1941.6246 L433,1931.6246 L150,1931.6246 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M433,1931.6246 L433,1941.6246 L443,1941.6246 L433,1931.6246 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="156" y="1950.5216">The</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="181" y="1950.5216">verificationCode</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="312" y="1950.5216">includes blockchain</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="156" y="1968.2276">specific information proving that the</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="156" y="1985.9336">requested data has been accounted (e.g.</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="156" y="2003.6396">tx_id</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="3" x="196" y="2003.6396">,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="202" y="2003.6396">block_id</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="266" y="2003.6396">)</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="463" x2="505" y1="2061.8607" y2="2061.8607"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="505" x2="505" y1="2061.8607" y2="2074.8607"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="464" x2="505" y1="2074.8607" y2="2074.8607"/><polygon fill="#A80036" points="474,2070.8607,464,2074.8607,474,2078.8607,470,2074.8607" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="470" y="2035.3457">check that blockchain registration</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="470" y="2053.0517">of S is within P</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="598" y="2056.9307">R</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="612" y="2053.0517">+ timeout</text><path d="M171,2027.4486 L171,2072.4486 L443,2072.4486 L443,2037.4486 L433,2027.4486 L171,2027.4486 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M433,2027.4486 L433,2037.4486 L443,2037.4486 L433,2027.4486 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="177" y="2046.3457">There is a predefined/agreed max timeout</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="177" y="2064.0517">to wait for</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="241" y="2064.0517">S</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="252" y="2064.0517">to be on the blockchain</text><polygon fill="#A80036" points="114,2132.5667,104,2136.5667,114,2140.5667,110,2136.5667" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="108" x2="452" y1="2136.5667" y2="2136.5667"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="120" y="2130.7577">S, PoS, verificationCode</text><path d="M43,2151.5667 L110,2151.5667 L110,2160.5667 L100,2170.5667 L43,2170.5667 L43,2151.5667 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="210.63" style="stroke: #000000; stroke-width: 2.0;" width="878.5" x="43" y="2151.5667"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="58" y="2166.4637">opt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="125" y="2165.3256">[S not received]</text><path d="M53,2178.2727 L126,2178.2727 L126,2187.2727 L116,2197.2727 L53,2197.2727 L53,2178.2727 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="176.924" style="stroke: #000000; stroke-width: 2.0;" width="858.5" x="53" y="2178.2727"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="68" y="2193.1697">loop</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="141" y="2192.0316">[while S not received &amp;&amp; currentTime &lt; P</text><text fill="#000000" font-family="Noto Sans" font-size="8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="366" y="2195.9106">R</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="374" y="2192.0316">+ timeout]</text><polygon fill="#A80036" points="801,2220.6666,811,2224.6666,801,2228.6666,805,2224.6666" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="807" y1="2224.6666" y2="2224.6666"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="110" y="2218.8576">getS {id: #X}</text><path d="M517,2237.6666 L517,2317.6666 L808,2317.6666 L808,2247.6666 L798,2237.6666 L517,2237.6666 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M798,2237.6666 L798,2247.6666 L808,2247.6666 L798,2237.6666 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="523" y="2256.5636">Although the Consumer can use i3-market to</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="523" y="2274.2697">connect to the Blockchain and download</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="769" y="2274.2697">S</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="3" x="777" y="2274.2697">,</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="523" y="2291.9757">it could also use any other connection to</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="523" y="2309.6817">download it since it is in the public Blockchain</text><polygon fill="#A80036" points="114,2343.1967,104,2347.1967,114,2351.1967,110,2347.1967" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="108" x2="817" y1="2347.1967" y2="2347.1967"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="120" y="2341.3877">S, PoS, verificationCode</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="108" x2="150" y1="2428.3148" y2="2428.3148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="150" x2="150" y1="2428.3148" y2="2441.3148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109" x2="150" y1="2441.3148" y2="2441.3148"/><polygon fill="#A80036" points="119,2437.3148,109,2441.3148,119,2445.3148,115,2441.3148" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="115" y="2387.0937">validate PoS</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="115" y="2404.7997">check hash(S) == SCommitment</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="115" y="2422.5058">validate verificationCode</text><path d="M33,2486.3148 L96,2486.3148 L96,2495.3148 L86,2505.3148 L33,2505.3148 L33,2486.3148 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="504.5721" style="stroke: #000000; stroke-width: 2.0;" width="1056.5" x="33" y="2486.3148"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="48" y="2501.2118">alt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="111" y="2500.0737">[validation failed]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="451" x2="441" y1="2529.7268" y2="2525.7268"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="451" x2="441" y1="2529.7268" y2="2533.7268"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="452" y1="2529.7268" y2="2529.7268"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="110" y="2523.9178">terminate</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="444" x2="462" y1="2520.7268" y2="2538.7268"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="444" x2="462" y1="2538.7268" y2="2520.7268"/><path d="M53,2544.7268 L120,2544.7268 L120,2553.7268 L110,2563.7268 L53,2563.7268 L53,2544.7268 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="70.118" style="stroke: #000000; stroke-width: 2.0;" width="1016.5" x="53" y="2544.7268"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="68" y="2559.6238">opt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="135" y="2558.4857">[conflict resolution]</text><rect fill="#FFFFFF" height="45.412" style="stroke: #000000; stroke-width: 2.0;" width="1002.5" x="60" y="2564.4328"/><polygon fill="#EEEEEE" points="60,2564.4328,124,2564.4328,124,2573.4328,114,2583.4328,60,2583.4328,60,2564.4328" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="73" y="2580.3298">ref</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="507.75" y="2601.3298">conflict resolution</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="33" x2="1089.5" y1="2622.8448" y2="2622.8448"/><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="38" y="2634.6038">[validation succeed]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="108" x2="150" y1="2680.2388" y2="2680.2388"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="150" x2="150" y1="2680.2388" y2="2693.2388"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109" x2="150" y1="2693.2388" y2="2693.2388"/><polygon fill="#A80036" points="119,2689.2388,109,2693.2388,119,2697.2388,115,2693.2388" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="115" y="2656.7237">decrypt C with S:</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="131" y="2674.4298">Dec(S, C)=decryptedData</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="108" x2="150" y1="2790.3568" y2="2790.3568"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="150" x2="150" y1="2790.3568" y2="2803.3568"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109" x2="150" y1="2803.3568" y2="2803.3568"/><polygon fill="#A80036" points="119,2799.3568,109,2803.3568,119,2807.3568,115,2803.3568" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="115" y="2749.1358">validate that</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="131" y="2766.8418">hash(decryptedData) == dataCommitment &amp;&amp;</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="131" y="2784.5478">decryptedData meets dataDescription</text><path d="M43,2848.3568 L110,2848.3568 L110,2857.3568 L100,2867.3568 L43,2867.3568 L43,2848.3568 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="135.5301" style="stroke: #000000; stroke-width: 2.0;" width="1036.5" x="43" y="2848.3568"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="58" y="2863.2538">opt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="125" y="2862.1157">[validation failed]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="451" x2="441" y1="2891.7689" y2="2887.7689"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="451" x2="441" y1="2891.7689" y2="2895.7689"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="452" y1="2891.7689" y2="2891.7689"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="110" y="2885.9598">terminate</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="444" x2="462" y1="2882.7689" y2="2900.7689"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="444" x2="462" y1="2900.7689" y2="2882.7689"/><path d="M53,2906.7689 L120,2906.7689 L120,2915.7689 L110,2925.7689 L53,2925.7689 L53,2906.7689 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="70.118" style="stroke: #000000; stroke-width: 2.0;" width="1016.5" x="53" y="2906.7689"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="68" y="2921.6659">opt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="135" y="2920.5278">[conflict resolution]</text><rect fill="#FFFFFF" height="45.412" style="stroke: #000000; stroke-width: 2.0;" width="1002.5" x="60" y="2926.4749"/><polygon fill="#EEEEEE" points="60,2926.4749,124,2926.4749,124,2935.4749,114,2945.4749,60,2945.4749,60,2926.4749" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="73" y="2942.3719">ref</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="507.75" y="2963.3719">conflict resolution</text><!--MD5=[52ad9f78e51390a3ce385a86a5935fed]
@startuml nonRepudiableExchangeLog
skinparam shadowing false
skinparam DefaultFontName Noto Sans
skinparam DefaultMonospacedFontName Noto Sans Mono
skinparam ArrowFontName Noto Sans Mono
skinparam maxMessageSize 350

title Non-repudiable data-exchange log

box "Consumer" #White
    participant ": SDA SDK" as C
end box
box "Provider" #White
    participant "SDA API\n: Data Transfer Manager" as P
end box
box "i3-Market Backplane\n" #LightGreen
    participant "Backplane API\n: Auditable Accounting" as AA
    participant "Backplane API\n: Conflict Resolution" as CR
end box

C->P++: GET data {id: #X}
    P->P++: create one time secret S
    P- -
    P->P++: encrypt data with S\nC=Enc(S, data)
    P- -
    P->P++: create proof of origin\nPoO=signature<sub>P</sub>({\n  id: #X,\n  src: ProvId,\n  dst: ConsId,\n  timestamp: TS<sub>O</sub>,\n  dataDescription,\n  dataCommitment: hash(data),\n  SCommitment: hash(S),\n  encryptedData: C\n})
    note left
        ""dataDescription"" describes the
        piece of plaintext data 
        (format, size, ...)

        ""dataCommitment"" is a commitment
        that can be later used to 
        verify the decrypted data

        ""SCommitment"" is a commitment 
        that can be later used to 
        verify the received ""S""
    end note
    P- -
return {\n  id: #X,\n  src: ProvId,\n  dst: ConsId,\n  timestamp: TS<sub>O</sub>,\n  dataDescription,\n  dataCommitment: hash(data),\n  Scommitment: hash(S),\n  encryptedData: C,\n  proof: PoO\n}

C->C++: validate PoO
C- -

alt invalid PoO
    C->>P !!: terminate
else valid PoO
    C->C: store PoO
    C->C++: create proof of reception\nPoR=signature<sub>C</sub>({\n  id: #X,\n  src: ProvId,\n  dst: ConsId,\n  timestamp: TS<sub>R</sub>,\n  dataDescription,\n  dataCommitment: hash(data),\n  SCommitment: hash(S),\n  encryptedData: C\n})
    C- -
    C->P++: {id: #X, timestamp: TS<sub>R</sub>, proof: PoR}
    P->P++: validate PoR
    P- -
    alt invalid PoR
        P->>C !!: terminate
    else valid PoR
        P->P: store PoR
        P->P++: create proof of S\nPoS=signature<sub>P</sub>({\n  id: #X,\n  src: ProvId,\n  dst: ConsId,\n  timestamp: TS<sub>P</sub>,\n  secret: S\n})
        P- -
        P->AA++: account ([\n{\n  availability: 'privateStorage',\n  permissions: {view: [ProvId, ConsId]},\n  content: {id: #X, dataDescription, PoO, PoR, PoS}\n},\n{\n  availability: 'blockchain',\n  content: {id: #X, S}\n}\n])
        return verificationCode
        note left
            The ""verificationCode"" includes blockchain
            specific information proving that the 
            requested data has been accounted (e.g. 
            ""tx_id"", ""block_id"")
        end note
        P- ->P++: check that blockchain registration\nof S is within P<sub>R</sub> + timeout
        note left
            There is a predefined/agreed max timeout
            to wait for ""S"" to be on the blockchain
        end note
        P- -
        return S, PoS, verificationCode
        opt S not received
            loop while S not received && currentTime < P<sub>R</sub> + timeout
                C->AA++: getS {id: #X}
                note left of AA
                    Although the Consumer can use i3-market to
                    connect to the Blockchain and download ""S"", 
                    it could also use any other connection to 
                    download it since it is in the public Blockchain
                end note
                return S, PoS, verificationCode
            end
        end

        C->C++: validate PoS\ncheck hash(S) == SCommitment\nvalidate verificationCode
        C- -

        alt validation failed
            C->>P !!: terminate
            opt conflict resolution
                ref over C, P, AA, CR
                    conflict resolution
                end ref
            end
        else validation succeed
            C->C++: decrypt C with S:\n  Dec(S, C)=decryptedData
            C- -
            C->C++: validate that\n  hash(decryptedData) == dataCommitment &&\n  decryptedData meets dataDescription
            C- -
            opt validation failed
                C->>P !!: terminate
                opt conflict resolution
                    ref over C, P, AA, CR
                        conflict resolution
                    end ref
                end
            end
        end
    end
end
@enduml

PlantUML version 1.2020.17(Sat Sep 19 14:30:11 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>