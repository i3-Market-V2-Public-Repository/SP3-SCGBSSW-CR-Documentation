<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3248px" preserveAspectRatio="none" style="width:868px;height:3248px;" version="1.1" viewBox="0 0 868 3248" width="868px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Noto Sans" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="296" x="286.75" y="29.2419">Non-repudiable data-exchange log</text><rect fill="#FFFFFF" height="3194.861" style="stroke: #A80036; stroke-width: 1.0;" width="88" x="63" y="42.5158"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="73.5" y="56.4129">Consumer</text><rect fill="#FFFFFF" height="3194.861" style="stroke: #A80036; stroke-width: 1.0;" width="187" x="242.5" y="42.5158"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="308.5" y="56.4129">Provider</text><rect fill="#90EE90" height="3194.861" style="stroke: #A80036; stroke-width: 1.0;" width="333" x="477.5" y="42.5158"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="135" x="576.5" y="56.4129">i3-Market Backplane</text><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="645.5" y="74.1189"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="809.7141"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="1205.2863"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="2560.2569"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="2812.1809"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="2957.711"/><rect fill="#FFFFFF" height="601.2384" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="331" y="168.7697"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="208.4757"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="300.8878"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="576.36"/><rect fill="#FFFFFF" height="950.1045" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="331" y="1292.6983"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="1332.4043"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="1657.1524"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="2176.0968"/><rect fill="#FFFFFF" height="61.265" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="560" y="1989.4486"/><rect fill="#FFFFFF" height="122.5301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="560" y="2330.9027"/><rect fill="#FFFFFF" height="2304.5269" style="stroke: #000000; stroke-width: 2.0;" width="843.5" x="13" y="859.7141"/><rect fill="#FFFFFF" height="2253.1149" style="stroke: none; stroke-width: 1.0;" width="843.5" x="13" y="911.1262"/><rect fill="#FFFFFF" height="1774.8367" style="stroke: #000000; stroke-width: 2.0;" width="823.5" x="23" y="1382.4043"/><rect fill="#FFFFFF" height="1723.4247" style="stroke: none; stroke-width: 1.0;" width="823.5" x="23" y="1433.8163"/><rect fill="#FFFFFF" height="210.63" style="stroke: #000000; stroke-width: 2.0;" width="621.5" x="47" y="2257.8028"/><rect fill="#FFFFFF" height="176.924" style="stroke: #000000; stroke-width: 2.0;" width="601.5" x="57" y="2284.5088"/><rect fill="#FFFFFF" height="539.9842" style="stroke: #000000; stroke-width: 2.0;" width="799.5" x="37" y="2610.2569"/><rect fill="#FFFFFF" height="70.118" style="stroke: #000000; stroke-width: 2.0;" width="759.5" x="57" y="2668.6689"/><rect fill="#FFFFFF" height="404.4541" style="stroke: none; stroke-width: 1.0;" width="799.5" x="37" y="2745.787"/><rect fill="#FFFFFF" height="135.5301" style="stroke: #000000; stroke-width: 2.0;" width="779.5" x="47" y="3007.711"/><rect fill="#FFFFFF" height="70.118" style="stroke: #000000; stroke-width: 2.0;" width="759.5" x="57" y="3066.123"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="107" x2="107" y1="135.0637" y2="3181.2411"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="335.5" x2="335.5" y1="135.0637" y2="3181.2411"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="564.5" x2="564.5" y1="135.0637" y2="3181.2411"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="732.5" x2="732.5" y1="135.0637" y2="3181.2411"/><rect fill="#FEFECE" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="67" y="100.9958"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="74" y="122.9617">: SDA SDK</text><rect fill="#FEFECE" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="67" y="3180.2411"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="74" y="3202.207">: SDA SDK</text><rect fill="#FEFECE" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="246.5" y="81.9279"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="309.5" y="103.8938">SDA API</text><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="253.5" y="122.9617">: Data Transfer Manager</text><rect fill="#FEFECE" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="246.5" y="3180.2411"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="309.5" y="3202.207">SDA API</text><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="253.5" y="3221.2749">: Data Transfer Manager</text><rect fill="#FEFECE" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="481.5" y="81.9279"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="517.5" y="103.8938">Backplane API</text><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="488.5" y="122.9617">: Auditable Accounting</text><rect fill="#FEFECE" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="481.5" y="3180.2411"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="517.5" y="3202.207">Backplane API</text><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="488.5" y="3221.2749">: Auditable Accounting</text><rect fill="#FEFECE" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="658.5" y="81.9279"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="685" y="103.8938">Backplane API</text><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="134" x="665.5" y="122.9617">: Conflict Resolution</text><rect fill="#FEFECE" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="658.5" y="3180.2411"/><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="685" y="3202.207">Backplane API</text><text fill="#000000" font-family="Noto Sans" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="134" x="665.5" y="3221.2749">: Conflict Resolution</text><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="809.7141"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="1205.2863"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="2560.2569"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="2812.1809"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="2957.711"/><rect fill="#FFFFFF" height="601.2384" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="331" y="168.7697"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="208.4757"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="300.8878"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="576.36"/><rect fill="#FFFFFF" height="950.1045" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="331" y="1292.6983"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="1332.4043"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="1657.1524"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="336" y="2176.0968"/><rect fill="#FFFFFF" height="61.265" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="560" y="1989.4486"/><rect fill="#FFFFFF" height="122.5301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="560" y="2330.9027"/><polygon fill="#A80036" points="319,164.7697,329,168.7697,319,172.7697,323,168.7697" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="325" y1="168.7697" y2="168.7697"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="114" y="162.9607">GET data {id: #X}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="388" y1="200.4757" y2="200.4757"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="388" y1="200.4757" y2="213.4757"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347" x2="388" y1="213.4757" y2="213.4757"/><polygon fill="#A80036" points="357,209.4757,347,213.4757,357,217.4757,353,213.4757" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="353" y="194.6667">create one time secret S</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="388" y1="292.8878" y2="292.8878"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="388" y1="292.8878" y2="305.8878"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347" x2="388" y1="305.8878" y2="305.8878"/><polygon fill="#A80036" points="357,301.8878,347,305.8878,357,309.8878,353,305.8878" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="353" y="269.3728">encrypt data with S</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="353" y="287.0788">C=Enc(S, data)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="388" y1="568.36" y2="568.36"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="388" y1="568.36" y2="581.36"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347" x2="388" y1="581.36" y2="581.36"/><polygon fill="#A80036" points="357,577.36,347,581.36,357,585.36,353,581.36" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="353" y="361.7848">create proof of origin</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="353" y="379.4908">PoO=signature</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="457" y="383.3698">P</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="463" y="379.4908">({</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="369" y="400.1968">id: #X,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="369" y="417.9028">src: ProvId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="369" y="435.6089">dst: ConsId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="369" y="453.3149">timestamp: TS</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="473" y="457.1939">O</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="479" y="453.3149">,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="369" y="474.0209">dataDescription,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="369" y="491.7269">dataCommitment: hash(</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="353" y="509.4329">data),</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="369" y="527.1389">SCommitment: hash(S),</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="369" y="544.845">encryptedData: C</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="353" y="562.551">})</text><path d="M90,364.2408 L90,568.2408 L326,568.2408 L326,374.2408 L316,364.2408 L90,364.2408 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M316,364.2408 L316,374.2408 L326,374.2408 L316,364.2408 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="96" y="383.1378">dataDescription</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="219" y="383.1378">describes the</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="96" y="400.8438">piece of plaintext data</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="96" y="418.5498">(format, size, ...)</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="99" y="436.2559"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="96" y="453.9619">dataCommitment</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="211" y="453.9619">is a commitment</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="96" y="471.6679">that can be later used to</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="96" y="489.3739">verify the decrypted data</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="99" y="507.0799"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="96" y="524.7859">SCommitment</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="187" y="524.7859">is a commitment</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="96" y="542.4919">that can be later used to</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="96" y="560.198">verify the received</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="208" y="560.198">S</text><polygon fill="#A80036" points="118,766.0081,108,770.0081,118,774.0081,114,770.0081" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="112" x2="335" y1="770.0081" y2="770.0081"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="124" y="637.257">{id: #X, src: ProvId, dst</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="124" y="654.963">: ConsId, timestamp: TS</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="308" y="658.842">O</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="314" y="654.963">,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="124" y="675.669">dataDescription,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="124" y="693.375">dataCommitment: hash(data</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="124" y="711.0811">),</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="124" y="728.7871">Scommitment: hash(S),</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="124" y="746.4931">encryptedData: C, proof:</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="124" y="764.1991">PoO}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="112" x2="154" y1="801.7141" y2="801.7141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="154" x2="154" y1="801.7141" y2="814.7141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="113" x2="154" y1="814.7141" y2="814.7141"/><polygon fill="#A80036" points="123,810.7141,113,814.7141,123,818.7141,119,814.7141" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="119" y="795.9051">validate PoO</text><path d="M13,859.7141 L76,859.7141 L76,868.7141 L66,878.7141 L13,878.7141 L13,859.7141 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2304.5269" style="stroke: #000000; stroke-width: 2.0;" width="843.5" x="13" y="859.7141"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="28" y="874.6111">alt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="91" y="873.473">[invalid PoO]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="334" x2="324" y1="903.1262" y2="899.1262"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="334" x2="324" y1="903.1262" y2="907.1262"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="335" y1="903.1262" y2="903.1262"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="114" y="897.3172">terminate</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="327" x2="345" y1="894.1262" y2="912.1262"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="327" x2="345" y1="912.1262" y2="894.1262"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="856.5" y1="912.1262" y2="912.1262"/><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="18" y="923.8851">[valid PoO]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="149" y1="951.8141" y2="951.8141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="149" x2="149" y1="951.8141" y2="964.8141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="108" x2="149" y1="964.8141" y2="964.8141"/><polygon fill="#A80036" points="118,960.8141,108,964.8141,118,968.8141,114,964.8141" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="114" y="946.0051">store PoO</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="112" x2="154" y1="1197.2863" y2="1197.2863"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="154" x2="154" y1="1197.2863" y2="1210.2863"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="113" x2="154" y1="1210.2863" y2="1210.2863"/><polygon fill="#A80036" points="123,1206.2863,113,1210.2863,123,1214.2863,119,1210.2863" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="119" y="990.7111">create proof of reception</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="119" y="1008.4171">PoR=signature</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="223" y="1012.2961">C</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="229" y="1008.4171">({</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="135" y="1029.1231">id: #X,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="135" y="1046.8291">src: ProvId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="135" y="1064.5351">dst: ConsId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="135" y="1082.2412">timestamp: TS</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="239" y="1086.1202">R</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="245" y="1082.2412">,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="135" y="1102.9472">dataDescription,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="135" y="1120.6532">dataCommitment: hash(</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="119" y="1138.3592">data),</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="135" y="1156.0652">SCommitment: hash(S),</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="135" y="1173.7712">encryptedData: C</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="119" y="1191.4773">})</text><polygon fill="#A80036" points="319,1288.6983,329,1292.6983,319,1296.6983,323,1292.6983" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="325" y1="1292.6983" y2="1292.6983"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="114" y="1266.1833">{id: #X, timestamp: TS</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="290" y="1270.0623">R</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="296" y="1266.1833">,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="114" y="1286.8893">proof: PoR}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="388" y1="1324.4043" y2="1324.4043"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="388" y1="1324.4043" y2="1337.4043"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347" x2="388" y1="1337.4043" y2="1337.4043"/><polygon fill="#A80036" points="357,1333.4043,347,1337.4043,357,1341.4043,353,1337.4043" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="353" y="1318.5953">validate PoR</text><path d="M23,1382.4043 L86,1382.4043 L86,1391.4043 L76,1401.4043 L23,1401.4043 L23,1382.4043 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1774.8367" style="stroke: #000000; stroke-width: 2.0;" width="823.5" x="23" y="1382.4043"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="38" y="1397.3013">alt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="101" y="1396.1632">[invalid PoR]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="117" y1="1425.8163" y2="1421.8163"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="117" y1="1425.8163" y2="1429.8163"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="330" y1="1425.8163" y2="1425.8163"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="124" y="1420.0073">terminate</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="98" x2="116" y1="1416.8163" y2="1434.8163"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="98" x2="116" y1="1434.8163" y2="1416.8163"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="846.5" y1="1434.8163" y2="1434.8163"/><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="28" y="1446.5753">[valid PoR]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="383" y1="1474.5042" y2="1474.5042"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="383" x2="383" y1="1474.5042" y2="1487.5042"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342" x2="383" y1="1487.5042" y2="1487.5042"/><polygon fill="#A80036" points="352,1483.5042,342,1487.5042,352,1491.5042,348,1487.5042" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="348" y="1468.6952">store PoR</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="388" y1="1649.1524" y2="1649.1524"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="388" y1="1649.1524" y2="1662.1524"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347" x2="388" y1="1662.1524" y2="1662.1524"/><polygon fill="#A80036" points="357,1658.1524,347,1662.1524,357,1666.1524,353,1662.1524" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="353" y="1513.4013">create proof of S</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="353" y="1531.1073">PoS=signature</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="457" y="1534.9863">P</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="463" y="1531.1073">({</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="369" y="1551.8133">id: #X,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="369" y="1569.5193">src: ProvId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="369" y="1587.2253">dst: ConsId,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="369" y="1604.9313">timestamp: TS</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="473" y="1608.8104">P</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="479" y="1604.9313">,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="369" y="1625.6374">secret: S</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="353" y="1643.3434">})</text><polygon fill="#A80036" points="548,1985.4486,558,1989.4486,548,1993.4486,552,1989.4486" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="554" y1="1989.4486" y2="1989.4486"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="348" y="1718.0494">account ([</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="348" y="1735.7554">{</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="364" y="1753.4614">availability: '</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="348" y="1771.1674">privateStorage',</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="364" y="1788.8735">permissions: {view: [</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="348" y="1806.5795">ProvId, ConsId]},</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="364" y="1824.2855">content: {id: #X,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="348" y="1841.9915">dataDescription, PoO, PoR</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="348" y="1859.6975">, PoS}</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="348" y="1877.4035">},</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="348" y="1895.1096">{</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="364" y="1912.8156">availability: '</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="348" y="1930.5216">blockchain',</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="364" y="1948.2276">content: {id: #X, S}</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="348" y="1965.9336">}</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="348" y="1983.6396">])</text><polygon fill="#A80036" points="352,2046.7137,342,2050.7137,352,2054.7137,348,2050.7137" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="346" x2="564" y1="2050.7137" y2="2050.7137"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="358" y="2044.9047">verificationCode</text><path d="M33,2002.4486 L33,2082.4486 L326,2082.4486 L326,2012.4486 L316,2002.4486 L33,2002.4486 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M316,2002.4486 L316,2012.4486 L326,2012.4486 L316,2002.4486 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="39" y="2021.3457">The</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="64" y="2021.3457">verificationCode</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="195" y="2021.3457">includes blockchain</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="39" y="2039.0517">specific information proving that the</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="39" y="2056.7577">requested data has been accounted (e.g.</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="39" y="2074.4637">tx_id</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="3" x="79" y="2074.4637">,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="85" y="2074.4637">block_id</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="149" y="2074.4637">)</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="346" x2="388" y1="2168.0968" y2="2168.0968"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="388" x2="388" y1="2168.0968" y2="2181.0968"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="347" x2="388" y1="2181.0968" y2="2181.0968"/><polygon fill="#A80036" points="357,2177.0968,347,2181.0968,357,2185.0968,353,2181.0968" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="353" y="2106.1697">check that blockchain</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="353" y="2123.8757">registration</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="353" y="2141.5818">of S is within P</text><text fill="#000000" font-family="Noto Sans Mono" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="6" x="481" y="2145.4608">R</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="495" y="2141.5818">+</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="353" y="2162.2878">timeout</text><path d="M54,2115.9787 L54,2160.9787 L326,2160.9787 L326,2125.9787 L316,2115.9787 L54,2115.9787 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M316,2115.9787 L316,2125.9787 L326,2125.9787 L316,2115.9787 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="60" y="2134.8757">There is a predefined/agreed max timeout</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="60" y="2152.5818">to wait for</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="124" y="2152.5818">S</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="135" y="2152.5818">to be on the blockchain</text><polygon fill="#A80036" points="118,2238.8028,108,2242.8028,118,2246.8028,114,2242.8028" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="112" x2="335" y1="2242.8028" y2="2242.8028"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="124" y="2236.9938">S, PoS, verificationCode</text><path d="M47,2257.8028 L114,2257.8028 L114,2266.8028 L104,2276.8028 L47,2276.8028 L47,2257.8028 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="210.63" style="stroke: #000000; stroke-width: 2.0;" width="621.5" x="47" y="2257.8028"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="62" y="2272.6998">opt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="129" y="2271.5617">[S not received]</text><path d="M57,2284.5088 L130,2284.5088 L130,2293.5088 L120,2303.5088 L57,2303.5088 L57,2284.5088 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="176.924" style="stroke: #000000; stroke-width: 2.0;" width="601.5" x="57" y="2284.5088"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="72" y="2299.4058">loop</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="145" y="2298.2677">[while S not received &amp;&amp; currentTime &lt; P</text><text fill="#000000" font-family="Noto Sans" font-size="8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="370" y="2302.1467">R</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="378" y="2298.2677">+ timeout]</text><polygon fill="#A80036" points="548,2326.9027,558,2330.9027,548,2334.9027,552,2330.9027" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="554" y1="2330.9027" y2="2330.9027"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="114" y="2325.0937">getS {id: #X}</text><path d="M264,2343.9027 L264,2423.9027 L555,2423.9027 L555,2353.9027 L545,2343.9027 L264,2343.9027 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M545,2343.9027 L545,2353.9027 L555,2353.9027 L545,2343.9027 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="270" y="2362.7997">Although the Consumer can use i3-market to</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="270" y="2380.5058">connect to the Blockchain and download</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="516" y="2380.5058">S</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="3" x="524" y="2380.5058">,</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="270" y="2398.2118">it could also use any other connection to</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="270" y="2415.9178">download it since it is in the public Blockchain</text><polygon fill="#A80036" points="118,2449.4328,108,2453.4328,118,2457.4328,114,2453.4328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="112" x2="564" y1="2453.4328" y2="2453.4328"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="124" y="2447.6238">S, PoS, verificationCode</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="112" x2="154" y1="2552.2569" y2="2552.2569"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="154" x2="154" y1="2552.2569" y2="2565.2569"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="113" x2="154" y1="2565.2569" y2="2565.2569"/><polygon fill="#A80036" points="123,2561.2569,113,2565.2569,123,2569.2569,119,2565.2569" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="119" y="2493.3298">validate PoS</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="119" y="2511.0358">check hash(S) ==</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="119" y="2528.7419">SCommitment</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="119" y="2546.4479">validate verificationCode</text><path d="M37,2610.2569 L100,2610.2569 L100,2619.2569 L90,2629.2569 L37,2629.2569 L37,2610.2569 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="539.9842" style="stroke: #000000; stroke-width: 2.0;" width="799.5" x="37" y="2610.2569"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="52" y="2625.1539">alt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="115" y="2624.0158">[validation failed]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="334" x2="324" y1="2653.6689" y2="2649.6689"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="334" x2="324" y1="2653.6689" y2="2657.6689"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="335" y1="2653.6689" y2="2653.6689"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="114" y="2647.8599">terminate</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="327" x2="345" y1="2644.6689" y2="2662.6689"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="327" x2="345" y1="2662.6689" y2="2644.6689"/><path d="M57,2668.6689 L124,2668.6689 L124,2677.6689 L114,2687.6689 L57,2687.6689 L57,2668.6689 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="70.118" style="stroke: #000000; stroke-width: 2.0;" width="759.5" x="57" y="2668.6689"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="72" y="2683.5659">opt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="139" y="2682.4278">[conflict resolution]</text><rect fill="#FFFFFF" height="45.412" style="stroke: #000000; stroke-width: 2.0;" width="745.5" x="64" y="2688.3749"/><polygon fill="#EEEEEE" points="64,2688.3749,128,2688.3749,128,2697.3749,118,2707.3749,64,2707.3749,64,2688.3749" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="77" y="2704.2719">ref</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="383.25" y="2725.2719">conflict resolution</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="37" x2="836.5" y1="2746.787" y2="2746.787"/><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="42" y="2758.5459">[validation succeed]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="112" x2="154" y1="2804.1809" y2="2804.1809"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="154" x2="154" y1="2804.1809" y2="2817.1809"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="113" x2="154" y1="2817.1809" y2="2817.1809"/><polygon fill="#A80036" points="123,2813.1809,113,2817.1809,123,2821.1809,119,2817.1809" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="119" y="2780.6659">decrypt C with S: Dec(S,</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="119" y="2798.3719">C)=decryptedData</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="112" x2="154" y1="2949.711" y2="2949.711"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="154" x2="154" y1="2949.711" y2="2962.711"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="113" x2="154" y1="2962.711" y2="2962.711"/><polygon fill="#A80036" points="123,2958.711,113,2962.711,123,2966.711,119,2962.711" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="119" y="2873.0779">validate hash(</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="119" y="2890.7839">decryptedData) ==</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="119" y="2908.4899">dataCommitment &amp;&amp;</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="167" y="2926.1959">decryptedData meets</text><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="119" y="2943.902">dataDescription</text><path d="M47,3007.711 L114,3007.711 L114,3016.711 L104,3026.711 L47,3026.711 L47,3007.711 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="135.5301" style="stroke: #000000; stroke-width: 2.0;" width="779.5" x="47" y="3007.711"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="62" y="3022.608">opt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="129" y="3021.4699">[validation failed]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="334" x2="324" y1="3051.123" y2="3047.123"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="334" x2="324" y1="3051.123" y2="3055.123"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="335" y1="3051.123" y2="3051.123"/><text fill="#000000" font-family="Noto Sans Mono" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="114" y="3045.314">terminate</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="327" x2="345" y1="3042.123" y2="3060.123"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="327" x2="345" y1="3060.123" y2="3042.123"/><path d="M57,3066.123 L124,3066.123 L124,3075.123 L114,3085.123 L57,3085.123 L57,3066.123 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="70.118" style="stroke: #000000; stroke-width: 2.0;" width="759.5" x="57" y="3066.123"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="72" y="3081.02">opt</text><text fill="#000000" font-family="Noto Sans" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="139" y="3079.8819">[conflict resolution]</text><rect fill="#FFFFFF" height="45.412" style="stroke: #000000; stroke-width: 2.0;" width="745.5" x="64" y="3085.829"/><polygon fill="#EEEEEE" points="64,3085.829,128,3085.829,128,3094.829,118,3104.829,64,3104.829,64,3085.829" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Noto Sans" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="77" y="3101.726">ref</text><text fill="#000000" font-family="Noto Sans" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="383.25" y="3122.726">conflict resolution</text><!--MD5=[73a3c6b3fb43926921a2c6c048891105]
@startuml nonRepudiableExchangeLog
skinparam shadowing false
skinparam DefaultFontName Noto Sans
skinparam DefaultMonospacedFontName Noto Sans Mono
skinparam ArrowFontName Noto Sans Mono
skinparam maxMessageSize 200

title Non-repudiable data-exchange log

box "Consumer" #White
    participant ": SDA SDK" as C
end box
box "Provider" #White
    participant "SDA API\n: Data Transfer Manager" as P
end box
box "i3-Market Backplane\n" #LightGreen
    participant "Backplane API\n: Auditable Accounting" as AA
    participant "Backplane API\n: Conflict Resolution" as CR
end box

C->P++: GET data {id: #X}
    P->P++: create one time secret S
    P- -
    P->P++: encrypt data with S\nC=Enc(S, data)
    P- -
    P->P++: create proof of origin\nPoO=signature<sub>P</sub>({\n  id: #X,\n  src: ProvId,\n  dst: ConsId,\n  timestamp: TS<sub>O</sub>,\n  dataDescription,\n  dataCommitment: hash(data),\n  SCommitment: hash(S),\n  encryptedData: C\n})
    note left
        ""dataDescription"" describes the
        piece of plaintext data 
        (format, size, ...)

        ""dataCommitment"" is a commitment
        that can be later used to 
        verify the decrypted data

        ""SCommitment"" is a commitment 
        that can be later used to 
        verify the received ""S""
    end note
    P- -
return {id: #X, src: ProvId, dst: ConsId, timestamp: TS<sub>O</sub>,\ndataDescription, dataCommitment: hash(data),\nScommitment: hash(S), encryptedData: C, proof: PoO}

C->C++: validate PoO
C- -

alt invalid PoO
    C->>P !!: terminate
else valid PoO
    C->C: store PoO
    C->C++: create proof of reception\nPoR=signature<sub>C</sub>({\n  id: #X,\n  src: ProvId,\n  dst: ConsId,\n  timestamp: TS<sub>R</sub>,\n  dataDescription,\n  dataCommitment: hash(data),\n  SCommitment: hash(S),\n  encryptedData: C\n})
    C- -
    C->P++: {id: #X, timestamp: TS<sub>R</sub>, proof: PoR}
    P->P++: validate PoR
    P- -
    alt invalid PoR
        P->>C !!: terminate
    else valid PoR
        P->P: store PoR
        P->P++: create proof of S\nPoS=signature<sub>P</sub>({\n  id: #X,\n  src: ProvId,\n  dst: ConsId,\n  timestamp: TS<sub>P</sub>,\n  secret: S\n})
        P- -
        P->AA++: account ([\n{\n  availability: 'privateStorage',\n  permissions: {view: [ProvId, ConsId]},\n  content: {id: #X, dataDescription, PoO, PoR, PoS}\n},\n{\n  availability: 'blockchain',\n  content: {id: #X, S}\n}\n])
        return verificationCode
        note left
            The ""verificationCode"" includes blockchain
            specific information proving that the 
            requested data has been accounted (e.g. 
            ""tx_id"", ""block_id"")
        end note
        P- ->P++: check that blockchain registration\nof S is within P<sub>R</sub> + timeout
        note left
            There is a predefined/agreed max timeout
            to wait for ""S"" to be on the blockchain
        end note
        P- -
        return S, PoS, verificationCode
        opt S not received
            loop while S not received && currentTime < P<sub>R</sub> + timeout
                C->AA++: getS {id: #X}
                note left of AA
                    Although the Consumer can use i3-market to
                    connect to the Blockchain and download ""S"", 
                    it could also use any other connection to 
                    download it since it is in the public Blockchain
                end note
                return S, PoS, verificationCode
            end
        end

        C->C++: validate PoS\ncheck hash(S) == SCommitment\nvalidate verificationCode
        C- -

        alt validation failed
            C->>P !!: terminate
            opt conflict resolution
                ref over C, P, AA, CR
                    conflict resolution
                end ref
            end
        else validation succeed
            C->C++: decrypt C with S: Dec(S, C)=decryptedData
            C- -
            C->C++: validate hash(decryptedData) == dataCommitment &&\n      decryptedData meets dataDescription
            C- -
            opt validation failed
                C->>P !!: terminate
                opt conflict resolution
                    ref over C, P, AA, CR
                        conflict resolution
                    end ref
                end
            end
        end
    end
end
@enduml

PlantUML version 1.2020.17(Sat Sep 19 14:30:11 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>